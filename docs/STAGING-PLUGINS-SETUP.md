# Настройка плагинов для Staging

## Рекомендуемые плагины для staging

### Обязательные:
1. **WooCommerce** — для работы корзины и чекаута
2. **weekly-meal-builder** — кастомный плагин для сборки меню

### Опциональные (если используются формы):
3. **Contact Form 7** — для форм на страницах `/test` и `/custom`

## Про Wordfence на staging

**Рекомендация: НЕ устанавливать Wordfence на staging**

**Причины:**
- Wordfence на production уже защищает весь домен (включая staging поддомен)
- Wordfence на staging будет создавать лишние таблицы в базе данных
- Может конфликтовать с production версией
- Staging — это тестовая среда, не нужна дополнительная защита

**Если все же хочешь установить:**
- Можно установить, но это не обязательно
- Убедись, что настройки не конфликтуют с production

## Установка плагинов

### Вариант 1: Через админку WordPress (рекомендуется)

1. **WooCommerce:**
   - Плагины → Добавить новый
   - Найди "WooCommerce"
   - Установи и активируй
   - Пройди мастер настройки (можно пропустить)

2. **weekly-meal-builder:**
   - Это кастомный плагин, нужно загрузить вручную
   - См. инструкцию ниже

3. **Contact Form 7 (если нужен):**
   - Плагины → Добавить новый
   - Найди "Contact Form 7"
   - Установи и активируй

### Вариант 2: Загрузка вручную

Если плагины не устанавливаются через админку, загрузи их вручную:

1. **WooCommerce:**
   - Скачай с https://wordpress.org/plugins/woocommerce/
   - Распакуй в `/wp-content/plugins/woocommerce/`
   - Активируй в админке

2. **weekly-meal-builder:**
   - Скопируй из `gustolocal-prod/weekly-meal-builder/`
   - Загрузи в `/wp-content/plugins/weekly-meal-builder/`
   - Активируй в админке

3. **Contact Form 7:**
   - Скачай с https://wordpress.org/plugins/contact-form-7/
   - Распакуй в `/wp-content/plugins/contact-form-7/`
   - Активируй в админке

## Деактивация ненужных плагинов

В админке WordPress видно, что много плагинов деактивированы из-за отсутствия файлов. Это нормально — они были активны на production, но файлы не загружены на staging.

**Что делать:**
- Можно оставить как есть (они не мешают)
- Или удалить их из базы данных через SQL (см. ниже)

### Удаление деактивированных плагинов из базы данных (опционально)

Если хочешь убрать ошибки о недостающих плагинах:

```sql
-- Удаляем все деактивированные плагины из списка активных
UPDATE staging_options 
SET option_value = 'a:3:{i:0;s:26:"akismet/akismet.php";i:1;s:30:"woocommerce/woocommerce.php";i:2;s:35:"weekly-meal-builder/weekly-meal-builder.php";}' 
WHERE option_name = 'active_plugins';
```

**Важно:** Замени список плагинов на те, которые реально установлены и нужны.

## Проверка после установки

После установки плагинов проверь:
1. WooCommerce работает — открой страницу товаров
2. weekly-meal-builder работает — проверь страницу сборки меню
3. Формы работают (если установлен Contact Form 7)

## Важно для безопасности

- **НЕ устанавливай Wordfence на staging** — production версия уже защищает
- Убедись, что staging не индексируется поисковиками (должен быть в robots.txt или закрыт паролем)
- После тестирования можно удалить временный обход прав из functions.php

