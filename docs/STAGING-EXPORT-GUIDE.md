# üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç –±–∞–∑—ã –¥–ª—è Staging

## –¶–µ–ª—å:
–ù–∞—Å—Ç—Ä–æ–∏—Ç—å staging –±–∞–∑—É –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- Meal Builder (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ, –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ WooCommerce –∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª–µ–π —á–µ–∫–∞—É—Ç–∞
- –î–æ—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–±–æ—Ä–∞ –∑–∞–∫–∞–∑–æ–≤ –∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

## –ß–¢–û –≠–ö–°–ü–û–†–¢–ò–†–û–í–ê–¢–¨ –° –ü–†–û–î–ê–ö–®–ù–ê:

### ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û (–°—Ç—Ä—É–∫—Ç—É—Ä–∞ + –î–∞–Ω–Ω—ã–µ):

#### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- `wp_users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `wp_usermeta` - –ø—Ä–∞–≤–∞ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `wp_options` - –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ WordPress, WooCommerce, –ø–ª–∞–≥–∏–Ω–æ–≤

#### 2. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–∞–∫—Å–æ–Ω–æ–º–∏–∏ (–¥–ª—è Meal Builder):
- `wp_terms` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ç–µ–≥–∏
- `wp_term_taxonomy` - —Ç–∞–∫—Å–æ–Ω–æ–º–∏–∏ (wmb_section, wmb_tag –∏ —Ç.–¥.)
- `wp_term_relationships` - —Å–≤—è–∑–∏ —Ç–µ—Ä–º–∏–Ω–æ–≤ —Å –ø–æ—Å—Ç–∞–º–∏
- `wp_termmeta` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω–æ–≤

#### 3. Meal Builder (–±–ª—é–¥–∞):
- `wp_posts` - **–¢–û–õ–¨–ö–û –ø–æ—Å—Ç—ã —Ç–∏–ø–∞ `wmb_dish`** (–±–ª—é–¥–∞)
- `wp_postmeta` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —ç—Ç–∏—Ö –ø–æ—Å—Ç–æ–≤

#### 4. WooCommerce (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):
- `wp_wc_orders` - –∑–∞–∫–∞–∑—ã
- `wp_wc_orders_meta` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–æ–≤
- `wp_wc_order_addresses` - –∞–¥—Ä–µ—Å–∞
- `wp_wc_order_operational_data` - –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `wp_wc_order_stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `wp_wc_order_product_lookup` - –ø—Ä–æ–¥—É–∫—Ç—ã –≤ –∑–∞–∫–∞–∑–∞—Ö
- `wp_wc_order_tax_lookup` - –Ω–∞–ª–æ–≥–∏
- `wp_wc_order_coupon_lookup` - –∫—É–ø–æ–Ω—ã
- `wp_wc_customer_lookup` - –∫–ª–∏–µ–Ω—Ç—ã
- `wp_wc_product_meta_lookup` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- `wp_wc_category_lookup` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ WooCommerce
- `wp_wc_tax_rate_classes` - –∫–ª–∞—Å—Å—ã –Ω–∞–ª–æ–≥–æ–≤
- `wp_wc_reserved_stock` - –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫–ª–∞–¥
- `wp_wc_webhooks` - –≤–µ–±—Ö—É–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)

### ‚úÖ –¢–û–õ–¨–ö–û –°–¢–†–£–ö–¢–£–†–ê (–ë–ï–ó –¥–∞–Ω–Ω—ã—Ö):

#### –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (—Å–æ–∑–¥–∞–¥–∏–º –ø—É—Å—Ç—ã–º–∏):
- `wp_dish_feedback` - –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
- `wp_custom_feedback_requests` - –∫–∞—Å—Ç–æ–º–Ω—ã–µ –æ–ø—Ä–æ—Å—ã
- `wp_custom_feedback_entries` - –∑–∞–ø–∏—Å–∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –æ–ø—Ä–æ—Å–æ–≤

### ‚ùå –ù–ï –≠–ö–°–ü–û–†–¢–ò–†–û–í–ê–¢–¨:

- `wp_posts` - —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –∑–∞–ø–∏—Å–∏ (–∫—Ä–æ–º–µ –±–ª—é–¥ meal builder)
- `wp_comments` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `wp_commentmeta` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- `wp_actionscheduler_*` - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
- `wp_wf*` - Wordfence —Ç–∞–±–ª–∏—Ü—ã
- `wp_post_smtp_*` - –ª–æ–≥–∏ –ø–æ—á—Ç—ã
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã, –Ω–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –≤—ã—à–µ

---

## –®–ê–ì 1: –≠–∫—Å–ø–æ—Ä—Ç –≤ phpMyAdmin

### –ù–∞ –ø—Ä–æ–¥–∞–∫—à–Ω–µ (u850527203_5vYEq):

1. **–í—ã–±–µ—Ä–∏—Ç–µ –±–∞–∑—É** `u850527203_5vYEq`
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Exportar" (–≠–∫—Å–ø–æ—Ä—Ç)**
3. **–í—ã–±–µ—Ä–∏—Ç–µ "Personalizado" (–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)**
4. **–§–æ—Ä–º–∞—Ç: SQL**

### –í—ã–±–æ—Ä —Ç–∞–±–ª–∏—Ü:

#### –î–ª—è —Ç–∞–±–ª–∏—Ü —Å –¥–∞–Ω–Ω—ã–º–∏:
- –û—Ç–º–µ—Ç—å—Ç–µ –Ω—É–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- –í –∫–æ–ª–æ–Ω–∫–µ **"Estructura"** ‚úÖ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- –í –∫–æ–ª–æ–Ω–∫–µ **"Datos"** ‚úÖ (–¥–∞–Ω–Ω—ã–µ)

#### –î–ª—è —Ç–∞–±–ª–∏—Ü —Ç–æ–ª—å–∫–æ —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
- –û—Ç–º–µ—Ç—å—Ç–µ: `wp_dish_feedback`, `wp_custom_feedback_requests`, `wp_custom_feedback_entries`
- –í –∫–æ–ª–æ–Ω–∫–µ **"Estructura"** ‚úÖ
- –í –∫–æ–ª–æ–Ω–∫–µ **"Datos"** ‚ùå

### –í–∞–∂–Ω–æ –¥–ª—è `wp_posts`:

–ü–æ—Å–∫–æ–ª—å–∫—É –Ω–∞–º –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –±–ª—é–¥–∞ meal builder, –∞ –Ω–µ –≤—Å–µ –ø–æ—Å—Ç—ã:

**–í–∞—Ä–∏–∞–Ω—Ç 1 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `wp_posts` –∏ `wp_postmeta` –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ —É–¥–∞–ª–∏—Ç–µ –ª–∏—à–Ω–∏–µ –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ SQL

**–í–∞—Ä–∏–∞–Ω—Ç 2:**
- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `wp_posts`
- –ü–æ—Ç–æ–º –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –±–ª—é–¥–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞:

1. **Opciones espec√≠ficas al formato**:
   - ‚úÖ "Mostrar comentarios" - –≤–∫–ª—é—á–µ–Ω–æ
   - ‚úÖ "Incluye marca temporal" - –≤–∫–ª—é—á–µ–Ω–æ

2. **Salida (–í—ã–≤–æ–¥)**:
   - ‚úÖ "Guardar salida a un archivo"
   - –ò–º—è —Ñ–∞–π–ª–∞: `gustolocal-prod-export.sql`

3. –ù–∞–∂–º–∏—Ç–µ **"Continuar"** –∏ —Å–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª

---

## –®–ê–ì 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ SQL —Ñ–∞–π–ª–∞

–ü–æ—Å–ª–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ –Ω—É–∂–Ω–æ:

1. **–ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å** `wp_` –Ω–∞ `staging_`
2. **–£–¥–∞–ª–∏—Ç—å –ª–∏—à–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ** (–µ—Å–ª–∏ –µ—Å—Ç—å)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `prepare-staging-export.php` (–Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ) –∏–ª–∏:

### –†—É—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ SQL —Ñ–∞–π–ª –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
2. –ù–∞–π—Ç–∏ –∏ –∑–∞–º–µ–Ω–∏—Ç—å:
   - `wp_` ‚Üí `staging_` (–≤–æ –≤—Å–µ–º —Ñ–∞–π–ª–µ)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–º–µ–Ω–∏–ª–æ—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## –®–ê–ì 3: –û—á–∏—Å—Ç–∫–∞ staging –±–∞–∑—ã

–ü–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º –Ω—É–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å staging –±–∞–∑—É:

### –í phpMyAdmin –Ω–∞ staging (u850527203_stg):

1. –í—ã–±–µ—Ä–∏—Ç–µ –±–∞–∑—É `u850527203_stg`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "SQL"
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
-- –£–¥–∞–ª—è–µ–º –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
SET FOREIGN_KEY_CHECKS = 0;
DROP TABLE IF EXISTS staging_actionscheduler_actions;
DROP TABLE IF EXISTS staging_actionscheduler_claims;
-- ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
SET FOREIGN_KEY_CHECKS = 1;
```

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:** `clear-staging-db.php`

---

## –®–ê–ì 4: –ò–º–ø–æ—Ä—Ç –≤ staging

1. –í phpMyAdmin –≤—ã–±–µ—Ä–∏—Ç–µ –±–∞–∑—É `u850527203_stg`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Importar" (–ò–º–ø–æ—Ä—Ç)**
3. –í—ã–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π SQL —Ñ–∞–π–ª
4. **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞:** –ï—Å–ª–∏ —Ñ–∞–π–ª –±–æ–ª—å—à–æ–π (>50MB), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
   - –£–≤–µ–ª–∏—á–µ–Ω–∏–µ `max_execution_time` –≤ php.ini
   - –ò–ª–∏ —Ä–∞–∑–±–µ–π—Ç–µ —Ñ–∞–π–ª –Ω–∞ —á–∞—Å—Ç–∏
5. –ù–∞–∂–º–∏—Ç–µ **"Continuar"**

---

## –®–ê–ì 5: –û—á–∏—Å—Ç–∫–∞ –ª–∏—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ª–∏—à–Ω–∏—Ö –ø–æ—Å—Ç–æ–≤:

```sql
-- –£–¥–∞–ª—è–µ–º –≤—Å–µ –ø–æ—Å—Ç—ã, –∫—Ä–æ–º–µ –±–ª—é–¥ meal builder
DELETE FROM staging_posts 
WHERE post_type NOT IN ('wmb_dish', 'attachment', 'nav_menu_item', 'wp_block');

-- –£–¥–∞–ª—è–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤
DELETE FROM staging_postmeta 
WHERE post_id NOT IN (SELECT ID FROM staging_posts);
```

---

## –®–ê–ì 6: –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
   ```sql
   SELECT * FROM staging_users WHERE ID = 1;
   SELECT meta_value FROM staging_usermeta 
   WHERE user_id = 1 AND meta_key = 'staging_capabilities';
   ```

2. **WooCommerce:**
   - –ó–∞–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É ‚Üí WooCommerce ‚Üí –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç–∏–≤–µ–Ω

3. **Meal Builder:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–ª—é–¥–∞ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å

4. **–¢–∞–±–ª–∏—Ü—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏:**
   ```sql
   SHOW TABLES LIKE 'staging_%feedback%';
   ```

---

## –®–ê–ì 7: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ï—Å–ª–∏ –∞–¥–º–∏–Ω–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
-- –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ID=1
UPDATE staging_usermeta 
SET meta_value = 'a:1:{s:13:"administrator";b:1;}' 
WHERE user_id = 1 AND meta_key = 'staging_capabilities';

UPDATE staging_usermeta 
SET meta_value = '10' 
WHERE user_id = 1 AND meta_key = 'staging_user_level';
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç: `fix-user-rights-direct.php`

---

## –ì–æ—Ç–æ–≤–æ! üéâ

–¢–µ–ø–µ—Ä—å staging –≥–æ—Ç–æ–≤ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- ‚úÖ Meal Builder —Å –±–ª—é–¥–∞–º–∏
- ‚úÖ WooCommerce –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è —á–µ–∫–∞—É—Ç–∞
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã –¥–ª—è –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- ‚úÖ –ß–∏—Å—Ç–∞—è –±–∞–∑–∞ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö

